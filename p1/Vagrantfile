Vagrant.configure(2) do |config|
    config.vm.box = "generic/debian12"
      
    config.vm.provider "virtualbox" do |v|
        v.memory = 512
        v.cpus = 1
    end

    config.vm.define "psimonen" do |psimonen|
        psimonen.vm.hostname = "psimonenS"
        psimonen.vm.network "private_network", ip: "192.168.56.110", hostname: true
        psimonen.vm.provision "shell",
            inline: "echo 'k3s server' && curl -sfL https://get.k3s.io | K3S_TOKEN=12345 sh -s - server --node-external-ip 192.168.56.110"
    end

    config.vm.define "valmpani" do |valmpani|
        valmpani.vm.hostname = "valmpaniSW"
        valmpani.vm.network "private_network", ip: "192.168.56.111", hostname: true
        valmpani.vm.provision "shell",
            inline: "echo 'k3s agent' && curl -sfL https://get.k3s.io | K3S_URL=https://192.168.56.110:6443 K3S_TOKEN=12345 sh -"
    end
end
